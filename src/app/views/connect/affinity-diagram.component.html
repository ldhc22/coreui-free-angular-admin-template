<div class="animated fadeIn">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-12">
          <h4 class="card-title mb-0">Affinity diagram</h4>
          <p>Nos permite organizar Conceptos e información no estructuradas y vincularlas para formar un modelo de pensamiento. Ayuda a identificar patrones significativos en los datos recogidos durante la investigación, especialmente los de carácter cualitativo.</p>
        </div>
        <div class="col-sm-6 mt-2 mb-3">
          <h4>Plantilla</h4>
        </div>
        <div class="col-sm-6 mt-2 mb-3">
          <select class="form-control" [(ngModel)]="selectedElement">
            <option *ngFor="let e of elements" [ngValue]="e">Versión {{e.version}} - {{e.date | date: 'dd/MM/yy'}}</option>
          </select>
        </div>
        <div class="col-sm-6 bg-pink row ml-0">
          <div class="col-9">
            <div class="form-group col-12 mt-4">
              <textarea type="text" class="form-control" placeholder="Concepto 1" [(ngModel)]="selectedElement.element.group1.concepts[0]"></textarea>
            </div>
            <div class="form-group col-11 offset-1" >
              <textarea type="text" class="form-control" placeholder="Concepto 2" [(ngModel)]="selectedElement.element.group1.concepts[1]"></textarea>
            </div>
            <div class="form-group col-10 offset-2">
              <textarea type="text" class="form-control" placeholder="Concepto 3" [(ngModel)]="selectedElement.element.group1.concepts[2]"></textarea>
            </div>
            <div class="form-group col-9 offset-3">
              <textarea type="text" class="form-control" placeholder="Concepto 4" [(ngModel)]="selectedElement.element.group1.concepts[3]"></textarea>
            </div>
            <div class="form-group col-8 offset-4">
              <textarea type="text" class="form-control" placeholder="Concepto 5" [(ngModel)]="selectedElement.element.group1.concepts[4]"></textarea>
            </div>
          </div>
          <div class="col-3 px-2 ml-0 mr-0 d-flex">
            <div class="form-group" style="margin-top: auto">
              <textarea class="form-control" placeholder="Grupo 1" [(ngModel)]="selectedElement.element.group1.name"></textarea>
            </div>
          </div>
        </div>
        <div class="col-sm-6 bg-info row ml-3">
          <div class="col-3 px-2 ml-0 mr-0 d-flex">
            <div class="form-group" style="margin-top: auto">
              <textarea class="form-control" placeholder="Grupo 2" [(ngModel)]="selectedElement.element.group2.name"></textarea>
            </div>
          </div>
          <div class="col-9">
            <div class="form-group col-12 mt-4">
              <textarea type="text" class="form-control" placeholder="Concepto 1" [(ngModel)]="selectedElement.element.group2.concepts[0]"></textarea>
            </div>
            <div class="form-group col-11" >
              <textarea type="text" class="form-control" placeholder="Concepto 2" [(ngModel)]="selectedElement.element.group2.concepts[1]"></textarea>
            </div>
            <div class="form-group col-10">
              <textarea type="text" class="form-control" placeholder="Concepto 3" [(ngModel)]="selectedElement.element.group2.concepts[2]"></textarea>
            </div>
            <div class="form-group col-9">
              <textarea type="text" class="form-control" placeholder="Concepto 4" [(ngModel)]="selectedElement.element.group2.concepts[3]"></textarea>
            </div>
            <div class="form-group col-8">
              <textarea type="text" class="form-control" placeholder="Concepto 5" [(ngModel)]="selectedElement.element.group2.concepts[4]"></textarea>
            </div>
          </div>
        </div>
        <div class="col-sm-6 bg-teal row ml-0 mt-2">
          <div class="col-9">
            <div class="form-group col-8 offset-4 mt-4">
              <textarea type="text" class="form-control" placeholder="Concepto 1" [(ngModel)]="selectedElement.element.group3.concepts[0]"></textarea>
            </div>
            <div class="form-group col-9 offset-3">
              <textarea type="text" class="form-control" placeholder="Concepto 2" [(ngModel)]="selectedElement.element.group3.concepts[1]"></textarea>
            </div>
            <div class="form-group col-10 offset-2">
              <textarea type="text" class="form-control" placeholder="Concepto 3" [(ngModel)]="selectedElement.element.group3.concepts[2]"></textarea>
            </div>
            <div class="form-group col-11 offset-1" >
              <textarea type="text" class="form-control" placeholder="Concepto 4" [(ngModel)]="selectedElement.element.group3.concepts[3]"></textarea>
            </div>
            <div class="form-group col-12">
              <textarea type="text" class="form-control" placeholder="Concepto 5" [(ngModel)]="selectedElement.element.group3.concepts[4]"></textarea>
            </div>
          </div>
          <div class="col-3 px-2 ml-0 mr-0 d-flex">
            <div class="form-group mt-4">
              <textarea class="form-control" placeholder="Grupo 3" [(ngModel)]="selectedElement.element.group3.name"></textarea>
            </div>
          </div>
        </div>
        <div class="col-sm-6 bg-orange row ml-3 mt-2">
          <div class="col-3 px-2 ml-0 mr-0 d-flex">
            <div class="form-group mt-4">
              <textarea class="form-control" placeholder="Grupo 4" [(ngModel)]="selectedElement.element.group4.name"></textarea>
            </div>
          </div>
          <div class="col-9">
            <div class="form-group col-8 mt-4">
              <textarea type="text" class="form-control" placeholder="Concepto 1" [(ngModel)]="selectedElement.element.group4.concepts[0]"></textarea>
            </div>
            <div class="form-group col-9">
              <textarea type="text" class="form-control" placeholder="Concepto 2" [(ngModel)]="selectedElement.element.group4.concepts[1]"></textarea>
            </div>
            <div class="form-group col-10">
              <textarea type="text" class="form-control" placeholder="Concepto 3" [(ngModel)]="selectedElement.element.group4.concepts[2]"></textarea>
            </div>
            <div class="form-group col-11 " >
              <textarea type="text" class="form-control" placeholder="Concepto 4" [(ngModel)]="selectedElement.element.group4.concepts[3]"></textarea>
            </div>
            <div class="form-group col-12 ">
              <textarea type="text" class="form-control" placeholder="Concepto 5" [(ngModel)]="selectedElement.element.group4.concepts[4]"></textarea>
            </div>
          </div>

        </div>
      </div>
    </div>
    <br/>
    <div class="col-sm-10 offset-sm-1" *ngIf="comments && comments.length > 0; else noComments ">
      <div class="text-right mt-2 px-2 text-muted">
        <span>{{comments.length}} comentarios</span>
      </div>
      <div class="card bg-gray-100 mt-1 mb-0 py-1 px-2 small">
        <a [routerLink]="" (click)="toggleComments()"><i class="fa fa-comment"></i>
          {{!showComments ? 'Comentarios anteriores' : 'Ocultar comentarios'}}
        </a>
      </div>
      <div *ngIf="!showComments; else moreComments" class="card bg-gray-100 comment mt-1 mb-0">
        <div>
          <div class="float-left py-4 mr-3 ml-3">
            <div class="avatar">
              <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar"
                   alt="admin@bootstrapmaster.com"/>
            </div>
          </div>
          <div class="mt-3">
            <h6>{{comments[comments.length - 1].user.name}} - hace
              6 horas</h6>
            <p>{{comments[comments.length - 1].body}}</p>
          </div>
        </div>
      </div>
      <ng-template #moreComments>
        <div *ngFor="let c of comments" class="card bg-gray-100 comment mt-1 mb-0">
          <div class="float-left py-4 mr-3 ml-3">
            <div class="avatar">
              <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar"
                   alt="admin@bootstrapmaster.com"/>
            </div>
          </div>
          <div class="mt-3">
            <h6>{{c.user.name}} - hace 6 horas</h6>
            <p>{{c.body}}</p>
          </div>
        </div>
      </ng-template>

    </div>
    <ng-template #noComments>
      <div class="col-sm-10 offset-sm-1 text-muted text-center">
        <div class="card bg-gray-100 py-4 mt-1 mb-0">
          No hay comentarios todavía
        </div>
      </div>
    </ng-template>
    <div class="col-sm-10 offset-sm-1">
      <div class="card bg-gray-100 comment mt-1 mb-0">
        <div class="float-left py-4 mr-3 ml-3">
          <div class="avatar">
            <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar" alt="admin@bootstrapmaster.com"/>
          </div>
        </div>
        <div class="mt-3">
                <textarea style="width: calc(100% - 35px - 3rem);" [(ngModel)]="commentToAdd.body" class="form-control"
                          placeholder="Escribe una respuesta"></textarea>
        </div>
        <div class="text-right">
          <button type="button" class="btn btn-primary mt-1 mb-2 mr-3" (click)="addComment()">Compartir</button>
        </div>
      </div>
    </div>
  </div>
</div>
