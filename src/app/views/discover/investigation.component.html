<div class="animated fadeIn">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-12">
          <h2>Investigación tecnica</h2>
          <p>Utilizar recursos bibliográficos para tener un mejor entendimiento del problema que se está tratando. Comparte la información relevante que encuentres con el equipo de trabajo.</p>
        </div>
        <div class="col-sm-8">
          <h4 class="card-title mb-2">Elementos de investigación</h4>
        </div>
        <div class="col-sm-4 mb-2">
          <button class="btn btn-info w-100">Añadir elemento</button>
        </div>
        <div class="col-sm-12">
          <div class="form-group">
            <select class="form-control" [(ngModel)]="selectedElement">
              <option *ngFor="let e of elements" [ngValue]="e">{{e.title}} -
                de {{e.user.name}} {{e.date | date: 'dd/MM/yy'}}</option>
            </select>
          </div>
        </div>
        <div class="col-sm-12">
          <a routerLink="">{{selectedElement.title}}</a>
        </div>
        <div class="col-sm-12">
          <p>{{selectedElement.description}}</p>
        </div>
        <div class="col-sm-12">
          <a routerLink="">{{selectedElement.fileName}}</a>
        </div>
        <div class="col-sm-10 offset-sm-1">
          <ngx-doc-viewer *ngIf="selectedElement.url" [url]="selectedElement.url" viewer="google"
                          style="width: 100%; height: 100vh;"></ngx-doc-viewer>
        </div>
        <br/>
        <div class="col-sm-10 offset-sm-1">
          <div class="text-right mt-2 px-2 text-muted">
            <span>{{selectedElement.comments.length}} comentarios</span>
          </div>
          <div class="card bg-gray-100 mt-1 mb-0 py-1 px-2 small">
            <a [routerLink]="" (click)="toggleComments()"><i class="fa fa-comment"></i>
              {{!showComments ? 'Comentarios anteriores' : 'Ocultar comentarios'}}
            </a>
          </div>
          <div *ngIf="!showComments; else moreComments" class="card bg-gray-100 comment mt-1 mb-0">
            <div>
              <div class="float-left py-4 mr-3 ml-3">
                <div class="avatar">
                  <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar" alt="admin@bootstrapmaster.com"/>
                </div>
              </div>
              <div class="mt-3">
                <h6>{{selectedElement.comments[selectedElement.comments.length - 1].user.name}} - hace 6 horas</h6>
                <p>{{selectedElement.comments[selectedElement.comments.length - 1].body}}</p>
              </div>
            </div>
          </div>
          <ng-template #moreComments>
            <div *ngFor="let c of selectedElement.comments" class="card bg-gray-100 comment mt-1 mb-0">
              <div class="float-left py-4 mr-3 ml-3">
                <div class="avatar">
                  <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar" alt="admin@bootstrapmaster.com"/>
                </div>
              </div>
              <div class="mt-3">
                <h6>{{c.user.name}} - hace 6 horas</h6>
                <p>{{c.body}}</p>
              </div>
            </div>
          </ng-template>
          <div class="card bg-gray-100 comment mt-1 mb-0" >
            <div class="float-left py-4 mr-3 ml-3">
              <div class="avatar">
                <img src="assets/img/avatars/7.jpg" width="35px" class="img-avatar" alt="admin@bootstrapmaster.com"/>
              </div>
            </div>
            <div class="mt-3">
              <textarea style="width: calc(100% - 35px - 3rem);" [(ngModel)]="commentToAdd.body"  class="form-control" placeholder="Escribe una respuesta"></textarea>
            </div>
            <div class="text-right">
              <button type="button" class="btn btn-primary mt-1 mb-2 mr-3" (click)="addComment()">Compartir</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-sm-5">
          <h4 class="card-title mb-2">Nuevo registro</h4>
        </div>
        <div class="col-sm-7">

        </div>
        <div class="col-sm-12">
          <div class="text-muted mb-2">
            <p>Comparte información relevante con el equipo de trabajo</p>
          </div>
        </div>
        <div class="col-sm-12">
          <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
            <div class="form-group row">
              <label class="col-sm-3">Título</label>
              <div class="col-sm-9">
                <input class="form-control" type="text" id="title" name="title" placeholder="Titulo de proyecto">
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-3">Resumen</label>
              <div class="col-sm-9">
                <textarea class="form-control"></textarea>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-3">Archivos</label>
              <div class="col-sm-9 input-group">
                <input type="file" id="file-multiple-input" name="file-multiple-input" multiple>
                <span class="input-group-append">
                <button type="button" class="btn btn-primary"><i class="fa fa-plus"></i></button>
              </span>
              </div>

            </div>
            <div class="form-group row">
              <div class="col-sm-12">
                <button type="button" class="btn btn-primary">
                  Guardar
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
